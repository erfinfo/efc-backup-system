# ============================================
# Configuration EFC Backup System
# ============================================
# Copier ce fichier vers .env et modifier les valeurs

# === Configuration Serveur ===
PORT=3000
NODE_ENV=production
HOST=0.0.0.0

# === Chemins de Stockage ===
# Linux/Mac
BACKUP_PATH=/var/backups/efc
LOG_PATH=/var/log/efc-backup
TEMP_PATH=/tmp/efc-backup

# Windows (décommenter si Windows)
# BACKUP_PATH=C:\Backups\EFC
# LOG_PATH=C:\Logs\EFC-Backup
# TEMP_PATH=C:\Temp\EFC-Backup

# === Configuration des Backups ===
RETENTION_DAYS=30                    # Durée de conservation des backups en jours
MAX_PARALLEL_BACKUPS=2               # Nombre max de backups simultanés
COMPRESSION_ENABLED=true             # Activer la compression des backups
COMPRESSION_LEVEL=6                  # Niveau de compression (1-9)
BACKUP_TIMEOUT=7200000              # Timeout en ms (2 heures par défaut)
USE_VSS=true                        # Utiliser Volume Shadow Copy sur Windows

# === Planning par Défaut ===
DAILY_BACKUP_TIME=02:00            # Heure du backup quotidien
WEEKLY_BACKUP_DAY=0                # Jour du backup hebdomadaire (0=Dimanche)
WEEKLY_BACKUP_TIME=03:00           # Heure du backup hebdomadaire
MONTHLY_BACKUP_DAY=1               # Jour du mois pour le backup mensuel
MONTHLY_BACKUP_TIME=04:00          # Heure du backup mensuel

# === Notifications Email ===
SMTP_ENABLED=false                  # Activer les notifications email
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false                   # true pour 465, false pour autres ports
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password        # Mot de passe d'application Gmail
NOTIFICATION_EMAIL=admin@company.com
SEND_SUCCESS_NOTIFICATIONS=false    # Envoyer email même si succès
SEND_FAILURE_NOTIFICATIONS=true     # Envoyer email si échec

# === Base de Données ===
DB_TYPE=sqlite                      # Type de base (sqlite, mysql, postgres)
DB_PATH=./data/efc-backup.db       # Chemin pour SQLite

# Pour MySQL/PostgreSQL (décommenter si utilisé)
# DB_HOST=localhost
# DB_PORT=3306
# DB_NAME=efc_backup
# DB_USER=root
# DB_PASS=password

# === Sécurité ===
JWT_SECRET=change-this-secret-key-in-production-minimum-32-chars
ADMIN_PASSWORD=changeme123          # Mot de passe interface web
SESSION_TIMEOUT=3600000             # Timeout session en ms (1 heure)
ENABLE_2FA=false                    # Activer l'authentification 2 facteurs
ALLOWED_IPS=                        # IPs autorisées (séparées par virgules)

# === Performance ===
MAX_FILE_SIZE=10737418240           # Taille max d'un fichier (10GB)
CHUNK_SIZE=67108864                 # Taille des chunks pour transfert (64MB)
TRANSFER_SPEED_LIMIT=0              # Limite de bande passante en KB/s (0=illimité)
CACHE_ENABLED=true                  # Activer le cache
CACHE_TTL=3600                      # Durée de vie du cache en secondes

# === Monitoring ===
ENABLE_METRICS=true                 # Activer les métriques
METRICS_PORT=9090                   # Port pour les métriques Prometheus
HEALTH_CHECK_INTERVAL=60000        # Intervalle de health check en ms
ALERT_DISK_USAGE_PERCENT=80        # Alerte si disque > 80%
ALERT_BACKUP_AGE_HOURS=48          # Alerte si dernier backup > 48h

# === Logs ===
LOG_LEVEL=info                      # debug, info, warn, error
LOG_MAX_SIZE=10485760               # Taille max d'un fichier de log (10MB)
LOG_MAX_FILES=30                    # Nombre max de fichiers de log
LOG_COMPRESS=true                   # Compresser les anciens logs
ENABLE_CONSOLE_LOG=true            # Afficher les logs dans la console
ENABLE_FILE_LOG=true               # Écrire les logs dans des fichiers

# === API ===
API_RATE_LIMIT=100                  # Limite de requêtes par minute
API_KEY=                            # Clé API optionnelle pour accès externe
ENABLE_SWAGGER=false                # Activer la documentation Swagger

# === Backup Windows Spécifique ===
WINDOWS_USE_ROBOCOPY=true          # Utiliser Robocopy pour les copies
WINDOWS_USE_WBADMIN=false          # Utiliser Windows Backup (nécessite admin)
WINDOWS_SHADOW_COPY=true           # Utiliser VSS pour les fichiers ouverts
DEFAULT_SSH_PORT=22                 # Port SSH par défaut pour les clients

# === Interface Web ===
WEB_TITLE=EFC Backup System        # Titre de l'interface
WEB_THEME=default                  # Thème de l'interface (default, dark, light)
WEB_LANGUAGE=fr                    # Langue de l'interface (fr, en)
ENABLE_REALTIME=true               # Activer les mises à jour temps réel (WebSocket)

# === Avancé ===
DEBUG_MODE=false                    # Mode debug (plus de logs)
DRY_RUN=false                      # Mode simulation (pas de backup réel)
ENABLE_EXPERIMENTAL=false          # Activer les fonctionnalités expérimentales